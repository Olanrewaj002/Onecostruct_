<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- required meta -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- #favicon -->
    <link
      rel="shortcut icon"
      href="assets/images/favicon.png"
      type="image/x-icon"
    />
    <!-- #title -->
    <title>Onecostruct &dash; Real Estate Investment For Everyone</title>
    <!-- #keywords -->
    <meta name="keywords" content="Real Estate, Investment, Properties, Rent" />
    <!-- #description -->
    <meta name="description" content="Real Estate Investment For Everyone" />
    <!-- #author -->
    <meta name="author" content="Pixelaxis" />

    <!-- ==== css dependencies start ==== -->

    <!-- bootstrap five css -->
    <link
      rel="stylesheet"
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
    />
    <!-- font awesome six css -->
    <link rel="stylesheet" href="assets/vendor/font-awesome/css/all.min.css" />
    <!-- nice select css -->
    <link
      rel="stylesheet"
      href="assets/vendor/nice-select/css/nice-select.css"
    />
    <!-- magnific popup css -->
    <link
      rel="stylesheet"
      href="assets/vendor/magnific-popup/css/magnific-popup.css"
    />
    <!-- slick css -->
    <link rel="stylesheet" href="assets/vendor/slick/css/slick.css" />
    <!-- animate css -->
    <link rel="stylesheet" href="assets/vendor/animate/animate.css" />

    <!-- ==== css dependencies end ==== -->

    <!-- main css -->
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <div
      class="wrapper bg__img"
      data-background="./assets/images/registration-bg.png"
    >
      <!-- ==== header start ==== -->
      <header class="header header--secondary">
        <nav class="navbar navbar-expand-xl">
          <div class="container">
            <a class="navbar-brand" href="index.html">
              <img
                src="assets/images/onecostruct logo.svg"
                alt="Logo"
                class="logo"
              />
            </a>
            <div class="navbar__out order-2 order-xl-3">
              <div class="nav__group__btn">
                <a href="login.html" class="log d-none d-sm-block"> Log In </a>
                <a
                  href="registration.html"
                  class="button button--effect d-none d-sm-block"
                >
                  Join Now <i class="fa-solid fa-arrow-right-long"></i>
                </a>
              </div>
              <button
                class="navbar-toggler d-block d-sm-none"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#primaryNav"
                aria-controls="primaryNav"
                aria-expanded="false"
                aria-label="Toggle Primary Nav"
              >
                <span class="icon-bar top-bar"></span>
                <span class="icon-bar middle-bar"></span>
                <span class="icon-bar bottom-bar"></span>
              </button>
            </div>
            <div
              class="collapse navbar-collapse order-3 order-xl-2"
              id="primaryNav"
            >
              <ul class="navbar-nav">
                <li class="nav-item d-block d-sm-none">
                  <a href="login.html" class="nav-link">Log In</a>
                </li>
                <li class="nav-item d-block d-sm-none">
                  <a
                    href="registration.html"
                    class="button button--effect button--last"
                    >Join Now <i class="fa-solid fa-arrow-right-long"></i
                  ></a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <!-- ==== #header end ==== -->

      <!-- ==== registration section start ==== -->
      <section class="registration clear__top">
        <div class="container">
          <div class="registration__area">
            <h4 class="neutral-top">Registration</h4>
            <form method="post" name="registration__form">
              <div class="regi__type" id="individualNameFields">
                <div class="input input--secondary">
                  <label for="fullName">Full Name or Company Name*</label>
                  <input
                    type="text"
                    name="fullName"
                    id="fullName"
                    placeholder="Enter your full name or company name"
                  />
                </div>
              </div>

              <!-- Fix the email ID mismatch -->
              <div class="input input--secondary">
                <label for="email">Email*</label>
                <!-- Changed from registrationMail to email -->
                <input
                  type="email"
                  name="email"
                  id="email"
                  placeholder="Enter your email"
                />
              </div>

              <!-- Other Fields -->
              <div class="input input--secondary">
                <label for="address">Address*</label>
                <input
                  type="text"
                  name="address"
                  id="address"
                  placeholder="Enter your address"
                />
              </div>
              <div class="input input--secondary">
                <label for="lga">LGA*</label>
                <input
                  type="text"
                  name="lga"
                  id="lga"
                  placeholder="Enter your LGA"
                />
              </div>
              <div class="input input--secondary">
                <label for="state">State*</label>
                <input
                  type="text"
                  name="state"
                  id="state"
                  placeholder="Enter your state"
                />
              </div>

              <div class="input__button">
                <button type="submit" class="button button--effect">
                  Submit
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
      <!-- ==== #registration section end ==== -->

      <!-- Scroll To Top -->
      <a href="javascript:void(0)" class="scrollToTop">
        <i class="fa-solid fa-angles-up"></i>
      </a>
    </div>

    <!-- ==== js dependencies start ==== -->

    <!-- jquery -->
    <script src="assets/vendor/jquery/jquery-3.6.0.min.js"></script>
    <!-- bootstrap five js -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- nice select js -->
    <script src="assets/vendor/nice-select/js/jquery.nice-select.min.js"></script>
    <!-- magnific popup js -->
    <script src="assets/vendor/magnific-popup/js/jquery.magnific-popup.min.js"></script>
    <!-- slick js -->
    <script src="assets/vendor/slick/js/slick.js"></script>
    <!-- shuffle js -->
    <script src="assets/vendor/shuffle/shuffle.min.js"></script>
    <!-- jquery downcount timer -->
    <script src="assets/vendor/downcount/jquery.downCount.js"></script>
    <!-- waypoints js -->
    <script src="assets/vendor/waypoints-js/jquery.waypoints.min.js"></script>
    <!-- counter up js -->
    <script src="assets/vendor/counter-js/jquery.counterup.min.js"></script>
    <!-- apex chart js -->
    <script src="assets/vendor/apex-chart/apexcharts.min.js"></script>
    <!-- wow js -->
    <script src="assets/vendor/wow/wow.min.js"></script>

    <!-- ==== js dependencies end ==== -->

    <!-- plugin js -->
    <script src="assets/js/plugin.js"></script>
    <!-- main js -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/registration.js"></script>
<script>document.querySelector('form[name="registration__form"]').addEventListener("submit", async (e) => {
  e.preventDefault();

  const formData = {
    fullName: document.getElementById("fullName").value.trim(),
    email: document.getElementById("email").value.trim(),
    address: document.getElementById("address").value.trim(),
    lga: document.getElementById("lga").value.trim(),
    state: document.getElementById("state").value.trim(),
  };

  // Clear previous error messages if they exist
  document.querySelectorAll('.error-message').forEach(el => el.remove());

  // Basic client-side validation
  const missingFields = Object.entries(formData).filter(
    ([key, value]) => !value
  );

  if (missingFields.length > 0) {
    const errorFields = missingFields.map(([key]) => key).join(', ');
    alert(`Please fill in the following fields: ${errorFields}`);
    return; // Stop form submission
  }

  try {
    const response = await fetch("/api/register", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(formData),
    });

    const data = await response.json();

    if (!response.ok) {
      // Handle error response
      throw new Error(data.message || "Registration failed");
    } else {
      // Only show success if we get a 2xx response
      alert("Registration successful!");
      document.querySelector('form[name="registration__form"]').reset();
    }
  } catch (error) {
    alert(error.message);
    console.error("Registration error:", error);
  }
});</script>
  </body>
</html>
